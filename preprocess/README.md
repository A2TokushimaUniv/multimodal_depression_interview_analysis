# 前処理スクリプト

## ライブラリのインストール

1. `pip install -r requirements.txt`で必要なライブラリをインストールする
2. [クイックスタート - Reazon Human Interaction Lab](https://research.reazon.jp/projects/ReazonSpeech/quickstart.html)に従い、Reazon Speech のモデルをインストールする

## 動画・音声・テキストの前処理

### 処理の流れ

1. 被験者のみが話している音声データから被験者の発話区間を特定する
2. 特定した発話区間をもとに、無音期間を除去した音声データと発話ごとの音声データを生成する
3. 上記の音声データをもとに被験者の発話を Speech-to-Text モデルに入力し、テキストデータを生成する
4. 特定した発話区間をもとに、動画データから被験者が話しているフレームを抽出し、それらを結合した10FPSの動画データを生成する

### 実行手順

1. `../data/raw/video/<igaku> or <riko>/{1..}/.mp4`の形式でデータを格納する
2. `../data/raw/voice/<igaku> or <riko>/{1..}/.m4a`の形式でデータを格納する
3. `python main.py`を実行する

### 実行結果

- 被験者の発話区間のみを抜き出した音声ファイル（全体と発話ごと）及び動画ファイル、被験者の発話テキストが生成される

## アンケートの前処理

### 処理の流れ

1. 理工学のアンケートを整形する（一部テスト時のデータが入っていたりなどで汚いので）
2. アンケート項目をまとめて数値に変換する（BIG5 を 5 つの性格ごとに点数化したりなど）
3. 医学・理工のアンケートをまとめて一つの CSV にする

### 実行手順

1. `../data/raw/<igaku> or <riko>/.csv`の形式でデータを格納する
2. `qa/clean_riko_before.py`を実行して理工アンケートを整形する
3. `qa/convert_qa.py`を実行して、アンケート項目をまとめて数値に変換したデータ（`<igaku> or <riko>_qa_result.csv`）を生成する
4. `qa/concat_qa.py`を実行して、rikoとigakuのアンケートと連結した`qa_result.csv`を生成する

### 実行結果

- 医学部と理工学部の被験者のアンケートの各項目を数値化し連結したデータが生成される